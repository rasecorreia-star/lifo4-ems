<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Manual Lifo4 EMS - Parte II: Detalhes do Sistema e Controle</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height: 1.7; color: #1a1a2e; background: #fff; font-size: 10pt; }
    .content { padding: 40px 50px; }
    .part-header { background: linear-gradient(135deg, #0f172a 0%, #1e3a5f 100%); color: white; padding: 60px 50px; margin: -40px -50px 40px -50px; text-align: center; }
    .part-header h2 { font-size: 14px; text-transform: uppercase; letter-spacing: 3px; opacity: 0.7; margin-bottom: 10px; }
    .part-header h1 { font-size: 36px; font-weight: 700; }
    .menu-section { page-break-before: always; margin-bottom: 50px; }
    .menu-header { background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%); border-left: 5px solid #10b981; padding: 25px 30px; margin-bottom: 30px; }
    .menu-header h2 { font-size: 24px; color: #0f172a; margin-bottom: 5px; }
    .menu-header .path { font-size: 12px; color: #10b981; font-family: monospace; background: #10b98120; padding: 3px 10px; border-radius: 4px; }
    .menu-header p { color: #64748b; font-size: 13px; margin-top: 10px; }
    h3 { font-size: 18px; color: #0f172a; margin: 30px 0 15px 0; padding-bottom: 8px; border-bottom: 2px solid #10b981; }
    h4 { font-size: 14px; color: #1e3a5f; margin: 20px 0 10px 0; }
    h4::before { content: "‚ñ∏ "; color: #10b981; }
    p { margin-bottom: 12px; text-align: justify; }
    ul, ol { margin: 12px 0 12px 25px; }
    li { margin-bottom: 6px; }
    .card-detail { background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 12px; padding: 20px; margin: 15px 0; }
    .card-detail h4 { margin-top: 0; color: #0f172a; font-size: 15px; }
    .field-table { width: 100%; border-collapse: collapse; margin: 15px 0; font-size: 10px; }
    .field-table th, .field-table td { border: 1px solid #e2e8f0; padding: 10px 12px; text-align: left; }
    .field-table th { background: #0f172a; color: white; font-weight: 600; }
    .field-table tr:nth-child(even) { background: #f8fafc; }
    .field-table .field-name { font-weight: 600; color: #1e3a5f; }
    .importance { background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; padding: 15px 20px; border-radius: 10px; margin: 20px 0; }
    .importance h5 { color: white; margin: 0 0 8px 0; font-size: 12px; }
    .importance p { margin: 0; font-size: 11px; }
    .warning { background: #fef3c7; border-left: 4px solid #f59e0b; padding: 15px 20px; margin: 15px 0; border-radius: 0 8px 8px 0; }
    .warning h5 { color: #b45309; margin: 0 0 5px 0; }
    .info { background: #dbeafe; border-left: 4px solid #3b82f6; padding: 15px 20px; margin: 15px 0; border-radius: 0 8px 8px 0; }
    .info h5 { color: #1d4ed8; margin: 0 0 5px 0; }
    .tab-section { background: #fff; border: 2px solid #e2e8f0; border-radius: 12px; margin: 20px 0; overflow: hidden; }
    .tab-header { background: #1e3a5f; color: white; padding: 12px 20px; font-weight: 600; font-size: 13px; }
    .tab-content { padding: 20px; }
    .action-list { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin: 15px 0; }
    .action-item { background: #f1f5f9; padding: 12px 15px; border-radius: 8px; font-size: 11px; }
    .action-item strong { color: #10b981; }
    .command-box { background: #1e293b; color: #e2e8f0; padding: 15px 20px; border-radius: 8px; font-family: monospace; margin: 15px 0; font-size: 11px; }
    .command-box .cmd { color: #10b981; }
    .command-box .param { color: #f59e0b; }
    .command-box .value { color: #3b82f6; }
    footer { margin-top: 60px; padding: 40px 50px; background: #0f172a; color: white; text-align: center; }
    @media print { .menu-section { page-break-before: always; } }
  </style>
</head>
<body>

<div class="content">

<div class="part-header">
  <h2>Parte II - Continua√ß√£o</h2>
  <h1>Detalhes do Sistema e Painel de Controle</h1>
</div>

<!-- ========== 5. DETALHES DO SISTEMA ========== -->
<div class="menu-section" id="sistema-detalhe">
  <div class="menu-header">
    <h2>üîç Detalhes do Sistema BESS</h2>
    <span class="path">/systems/:systemId</span>
    <p>P√°gina completa com todas as informa√ß√µes de um sistema BESS espec√≠fico, incluindo status em tempo real, hist√≥rico, configura√ß√µes e diagn√≥sticos.</p>
  </div>

  <h3>Vis√£o Geral</h3>
  <p>
    Esta √© a p√°gina mais completa para um sistema individual. Aqui voc√™ encontra TUDO sobre o sistema:
    desde informa√ß√µes b√°sicas de cadastro at√© gr√°ficos detalhados de cada c√©lula da bateria.
    √â a p√°gina de refer√™ncia para qualquer investiga√ß√£o ou an√°lise aprofundada.
  </p>

  <div class="importance">
    <h5>üéØ Por que este menu √© importante para BESS?</h5>
    <p>
      Quando um alerta √© disparado ou quando voc√™ precisa entender o comportamento de um sistema espec√≠fico,
      esta p√°gina fornece todas as informa√ß√µes necess√°rias em um √∫nico lugar. √â aqui que voc√™ encontra
      a tens√£o de cada c√©lula individual, o hist√≥rico de temperatura, os ciclos realizados e qualquer
      outro detalhe necess√°rio para diagn√≥stico e tomada de decis√£o.
    </p>
  </div>

  <h3>Abas Dispon√≠veis</h3>

  <!-- ABA: VIS√ÉO GERAL -->
  <div class="tab-section">
    <div class="tab-header">üìä Aba: Vis√£o Geral</div>
    <div class="tab-content">
      <p>Primeira aba com resumo completo do sistema:</p>

      <h4>Card: Informa√ß√µes B√°sicas</h4>
      <table class="field-table">
        <tr><th>Campo</th><th>O que mostra</th><th>Por que √© importante</th></tr>
        <tr>
          <td class="field-name">ID do Sistema</td>
          <td>Identificador √∫nico no banco de dados</td>
          <td>Refer√™ncia para suporte t√©cnico, API e documenta√ß√£o.</td>
        </tr>
        <tr>
          <td class="field-name">Nome</td>
          <td>Nome amig√°vel configur√°vel</td>
          <td>Identifica√ß√£o f√°cil para operadores.</td>
        </tr>
        <tr>
          <td class="field-name">N√∫mero de S√©rie</td>
          <td>S/N do equipamento f√≠sico</td>
          <td>Necess√°rio para garantia, suporte do fabricante.</td>
        </tr>
        <tr>
          <td class="field-name">Fabricante</td>
          <td>Nome do fabricante do sistema</td>
          <td>Contexto para troubleshooting e pe√ßas de reposi√ß√£o.</td>
        </tr>
        <tr>
          <td class="field-name">Modelo</td>
          <td>Modelo espec√≠fico do sistema</td>
          <td>Cada modelo tem caracter√≠sticas e limita√ß√µes espec√≠ficas.</td>
        </tr>
        <tr>
          <td class="field-name">Data de Instala√ß√£o</td>
          <td>Quando o sistema foi instalado</td>
          <td>Calcula idade, per√≠odo de garantia, degrada√ß√£o esperada.</td>
        </tr>
        <tr>
          <td class="field-name">Endere√ßo</td>
          <td>Localiza√ß√£o f√≠sica completa</td>
          <td>Para despacho de t√©cnicos, contexto geogr√°fico.</td>
        </tr>
        <tr>
          <td class="field-name">Coordenadas GPS</td>
          <td>Latitude e longitude</td>
          <td>Localiza√ß√£o precisa para navega√ß√£o e mapa.</td>
        </tr>
      </table>

      <h4>Card: Status em Tempo Real</h4>
      <table class="field-table">
        <tr><th>Campo</th><th>O que mostra</th><th>Faixa Normal</th><th>Por que √© importante</th></tr>
        <tr>
          <td class="field-name">Estado Operacional</td>
          <td>Carregando / Descarregando / Standby / Erro / Manuten√ß√£o</td>
          <td>-</td>
          <td>O que o sistema est√° fazendo agora.</td>
        </tr>
        <tr>
          <td class="field-name">SOC (State of Charge)</td>
          <td>Percentual de carga atual</td>
          <td>20% - 80%</td>
          <td>Quanto de energia est√° dispon√≠vel. Operar fora da faixa acelera degrada√ß√£o.</td>
        </tr>
        <tr>
          <td class="field-name">SOH (State of Health)</td>
          <td>Sa√∫de da bateria</td>
          <td>80% - 100%</td>
          <td>Capacidade atual vs original. Abaixo de 80% considera-se fim de vida √∫til.</td>
        </tr>
        <tr>
          <td class="field-name">Pot√™ncia</td>
          <td>kW instant√¢neo (+ descarga, - carga)</td>
          <td>Dentro do rated power</td>
          <td>Taxa atual de carga/descarga.</td>
        </tr>
        <tr>
          <td class="field-name">Tens√£o DC</td>
          <td>Tens√£o do barramento DC</td>
          <td>Varia por sistema (ex: 600-800V)</td>
          <td>Tens√£o fora da faixa indica problema nas c√©lulas ou conex√µes.</td>
        </tr>
        <tr>
          <td class="field-name">Corrente DC</td>
          <td>Corrente do sistema</td>
          <td>Dentro do rated current</td>
          <td>Corrente alta = mais stress nas c√©lulas.</td>
        </tr>
        <tr>
          <td class="field-name">Temperatura M√°xima</td>
          <td>Maior temperatura entre todas as c√©lulas</td>
          <td>20¬∞C - 35¬∞C</td>
          <td>CR√çTICO: Acima de 45¬∞C requer aten√ß√£o, acima de 55¬∞C √© emerg√™ncia.</td>
        </tr>
        <tr>
          <td class="field-name">Temperatura M√≠nima</td>
          <td>Menor temperatura entre todas as c√©lulas</td>
          <td>15¬∞C - 35¬∞C</td>
          <td>Abaixo de 0¬∞C n√£o deve carregar (risco de lithium plating).</td>
        </tr>
        <tr>
          <td class="field-name">Delta Temperatura</td>
          <td>Diferen√ßa entre max e min</td>
          <td>&lt; 5¬∞C</td>
          <td>Delta alto indica problema de refrigera√ß√£o ou c√©lula com problema.</td>
        </tr>
        <tr>
          <td class="field-name">√öltima Atualiza√ß√£o</td>
          <td>Timestamp do √∫ltimo dado recebido</td>
          <td>&lt; 30 segundos</td>
          <td>Dados muito antigos indicam problema de comunica√ß√£o.</td>
        </tr>
      </table>

      <h4>Card: Especifica√ß√µes T√©cnicas</h4>
      <table class="field-table">
        <tr><th>Campo</th><th>O que mostra</th><th>Por que √© importante</th></tr>
        <tr>
          <td class="field-name">Capacidade de Pot√™ncia</td>
          <td>kW nominal do sistema</td>
          <td>Limite de pot√™ncia que pode ser operado continuamente.</td>
        </tr>
        <tr>
          <td class="field-name">Capacidade de Energia</td>
          <td>kWh nominal do sistema</td>
          <td>Quantidade total de energia que pode armazenar.</td>
        </tr>
        <tr>
          <td class="field-name">Qu√≠mica das C√©lulas</td>
          <td>LFP, NMC, NCA, etc.</td>
          <td>Cada qu√≠mica tem caracter√≠sticas de seguran√ßa, vida √∫til e performance diferentes.</td>
        </tr>
        <tr>
          <td class="field-name">N√∫mero de M√≥dulos</td>
          <td>Quantidade de m√≥dulos/racks</td>
          <td>Estrutura f√≠sica do sistema.</td>
        </tr>
        <tr>
          <td class="field-name">C√©lulas por M√≥dulo</td>
          <td>Configura√ß√£o de c√©lulas</td>
          <td>Necess√°rio para diagn√≥stico de c√©lulas individuais.</td>
        </tr>
        <tr>
          <td class="field-name">Tens√£o Nominal</td>
          <td>Tens√£o de opera√ß√£o normal</td>
          <td>Refer√™ncia para an√°lise de desvios.</td>
        </tr>
        <tr>
          <td class="field-name">Tens√£o M√≠nima/M√°xima</td>
          <td>Limites de tens√£o de opera√ß√£o</td>
          <td>Sistema desliga se tens√£o sair desta faixa.</td>
        </tr>
        <tr>
          <td class="field-name">Corrente M√°xima</td>
          <td>Limite de corrente</td>
          <td>Exceder causa aquecimento e degrada√ß√£o acelerada.</td>
        </tr>
        <tr>
          <td class="field-name">Efici√™ncia Round-Trip</td>
          <td>% de efici√™ncia (t√≠pico 85-92%)</td>
          <td>Quanto de energia √© perdido em cada ciclo carga-descarga.</td>
        </tr>
        <tr>
          <td class="field-name">Ciclos Nominais</td>
          <td>Ciclos garantidos pelo fabricante</td>
          <td>Base para calcular degrada√ß√£o e vida √∫til esperada.</td>
        </tr>
      </table>

      <h4>Card: Estat√≠sticas de Uso</h4>
      <table class="field-table">
        <tr><th>Campo</th><th>O que mostra</th><th>Por que √© importante</th></tr>
        <tr>
          <td class="field-name">Ciclos Totais</td>
          <td>N√∫mero de ciclos completos realizados</td>
          <td>Indica desgaste acumulado. Compare com ciclos nominais para estimar vida restante.</td>
        </tr>
        <tr>
          <td class="field-name">Ciclos Equivalentes</td>
          <td>Ciclos calculados considerando profundidade</td>
          <td>Mais preciso que ciclos totais pois considera ciclos parciais.</td>
        </tr>
        <tr>
          <td class="field-name">Energia Total Processada</td>
          <td>MWh carregados + descarregados</td>
          <td>Volume total de energia que passou pelo sistema.</td>
        </tr>
        <tr>
          <td class="field-name">Horas de Opera√ß√£o</td>
          <td>Tempo total em opera√ß√£o (n√£o standby)</td>
          <td>Tempo que o sistema esteve efetivamente trabalhando.</td>
        </tr>
        <tr>
          <td class="field-name">Disponibilidade</td>
          <td>% do tempo que o sistema esteve dispon√≠vel</td>
          <td>Meta t√≠pica > 98%. Baixa disponibilidade indica problemas.</td>
        </tr>
        <tr>
          <td class="field-name">MTBF</td>
          <td>Mean Time Between Failures</td>
          <td>Indica confiabilidade do sistema.</td>
        </tr>
        <tr>
          <td class="field-name">MTTR</td>
          <td>Mean Time To Repair</td>
          <td>Indica efici√™ncia da manuten√ß√£o.</td>
        </tr>
      </table>
    </div>
  </div>

  <!-- ABA: C√âLULAS -->
  <div class="tab-section">
    <div class="tab-header">üî¨ Aba: C√©lulas / M√≥dulos</div>
    <div class="tab-content">
      <p>Visualiza√ß√£o detalhada de cada c√©lula individual da bateria:</p>

      <div class="importance">
        <h5>üéØ Por que monitorar c√©lulas individualmente?</h5>
        <p>
          Uma √∫nica c√©lula problem√°tica pode comprometer todo o sistema. Monitorar individualmente permite
          identificar c√©lulas com tens√£o anormal, temperatura elevada ou degrada√ß√£o acelerada ANTES que
          causem problemas maiores. Isso √© essencial para preven√ß√£o de thermal runaway.
        </p>
      </div>

      <h4>Mapa de Calor: Tens√£o das C√©lulas</h4>
      <table class="field-table">
        <tr><th>Elemento</th><th>O que mostra</th><th>Por que √© importante</th></tr>
        <tr>
          <td class="field-name">Grid de C√©lulas</td>
          <td>Cada c√©lula representada por um quadrado</td>
          <td>Visualiza√ß√£o r√°pida de centenas de c√©lulas.</td>
        </tr>
        <tr>
          <td class="field-name">Cor Verde</td>
          <td>Tens√£o normal (3.2V - 3.4V para LFP)</td>
          <td>C√©lula saud√°vel operando normalmente.</td>
        </tr>
        <tr>
          <td class="field-name">Cor Amarela</td>
          <td>Tens√£o levemente fora do normal</td>
          <td>Aten√ß√£o: pode indicar in√≠cio de problema.</td>
        </tr>
        <tr>
          <td class="field-name">Cor Vermelha</td>
          <td>Tens√£o significativamente anormal</td>
          <td>CR√çTICO: c√©lula com problema, investigar imediatamente.</td>
        </tr>
        <tr>
          <td class="field-name">Tooltip</td>
          <td>Valor exato ao passar o mouse</td>
          <td>Leitura precisa de qualquer c√©lula.</td>
        </tr>
      </table>

      <h4>Mapa de Calor: Temperatura das C√©lulas</h4>
      <table class="field-table">
        <tr><th>Elemento</th><th>O que mostra</th><th>Por que √© importante</th></tr>
        <tr>
          <td class="field-name">Escala de Cor</td>
          <td>Azul (frio) ‚Üí Verde (normal) ‚Üí Amarelo ‚Üí Vermelho (quente)</td>
          <td>Identifica√ß√£o visual instant√¢nea de pontos quentes.</td>
        </tr>
        <tr>
          <td class="field-name">Hot Spots</td>
          <td>C√©lulas mais quentes que vizinhas</td>
          <td>Hot spots podem indicar c√©lula defeituosa ou problema de refrigera√ß√£o localizado.</td>
        </tr>
        <tr>
          <td class="field-name">Gradiente</td>
          <td>Padr√£o de varia√ß√£o de temperatura</td>
          <td>Gradiente uniforme = OK. Pontos isolados quentes = problema.</td>
        </tr>
      </table>

      <h4>Tabela Detalhada de C√©lulas</h4>
      <table class="field-table">
        <tr><th>Coluna</th><th>O que mostra</th><th>Faixa Normal (LFP)</th><th>Por que √© importante</th></tr>
        <tr>
          <td class="field-name">ID C√©lula</td>
          <td>Identificador √∫nico (ex: M1-C12)</td>
          <td>-</td>
          <td>Localiza√ß√£o exata para manuten√ß√£o.</td>
        </tr>
        <tr>
          <td class="field-name">Tens√£o</td>
          <td>Tens√£o atual em Volts</td>
          <td>2.5V - 3.65V</td>
          <td>Fora da faixa = c√©lula com problema.</td>
        </tr>
        <tr>
          <td class="field-name">Temperatura</td>
          <td>Temperatura em ¬∞C</td>
          <td>15¬∞C - 40¬∞C</td>
          <td>Acima de 45¬∞C √© preocupante.</td>
        </tr>
        <tr>
          <td class="field-name">Resist√™ncia Interna</td>
          <td>mOhm</td>
          <td>Varia por c√©lula, mas deve ser est√°vel</td>
          <td>Aumento indica degrada√ß√£o.</td>
        </tr>
        <tr>
          <td class="field-name">SOC Estimado</td>
          <td>% estimado da c√©lula</td>
          <td>-</td>
          <td>Desbalanceamento entre c√©lulas.</td>
        </tr>
        <tr>
          <td class="field-name">Status Balanceamento</td>
          <td>Balanceando / OK</td>
          <td>-</td>
          <td>Se uma c√©lula est√° sempre balanceando, pode ter problema.</td>
        </tr>
        <tr>
          <td class="field-name">Alertas</td>
          <td>√çcones de alerta se houver</td>
          <td>Nenhum</td>
          <td>Indica√ß√£o visual de problemas.</td>
        </tr>
      </table>

      <div class="warning">
        <h5>‚ö†Ô∏è Sinais de Alerta em C√©lulas</h5>
        <p><strong>Tens√£o muito diferente das vizinhas:</strong> Pode indicar c√©lula defeituosa ou conex√£o ruim.</p>
        <p><strong>Temperatura muito acima das vizinhas:</strong> Risco de thermal runaway, investigar IMEDIATAMENTE.</p>
        <p><strong>Resist√™ncia interna crescente:</strong> C√©lula degradando mais r√°pido que o esperado.</p>
        <p><strong>Sempre em balanceamento:</strong> C√©lula pode estar com capacidade reduzida.</p>
      </div>
    </div>
  </div>

  <!-- ABA: HIST√ìRICO -->
  <div class="tab-section">
    <div class="tab-header">üìà Aba: Hist√≥rico</div>
    <div class="tab-content">
      <p>Gr√°ficos hist√≥ricos de todas as m√©tricas do sistema:</p>

      <h4>Gr√°fico: SOC ao Longo do Tempo</h4>
      <table class="field-table">
        <tr><th>Elemento</th><th>O que mostra</th><th>Por que √© importante</th></tr>
        <tr>
          <td class="field-name">Linha de SOC</td>
          <td>Varia√ß√£o do estado de carga</td>
          <td>Visualizar ciclos de carga/descarga.</td>
        </tr>
        <tr>
          <td class="field-name">Linhas de Limite</td>
          <td>SOC m√≠nimo e m√°ximo configurados</td>
          <td>Verificar se o sistema est√° respeitando os limites.</td>
        </tr>
        <tr>
          <td class="field-name">Padr√£o de Opera√ß√£o</td>
          <td>Forma dos ciclos</td>
          <td>Ciclos regulares = opera√ß√£o normal. Irregularidades = investigar.</td>
        </tr>
      </table>

      <h4>Gr√°fico: Pot√™ncia ao Longo do Tempo</h4>
      <table class="field-table">
        <tr><th>Elemento</th><th>O que mostra</th><th>Por que √© importante</th></tr>
        <tr>
          <td class="field-name">√Årea Positiva</td>
          <td>Pot√™ncia de descarga</td>
          <td>Quando o sistema forneceu energia.</td>
        </tr>
        <tr>
          <td class="field-name">√Årea Negativa</td>
          <td>Pot√™ncia de carga</td>
          <td>Quando o sistema consumiu energia.</td>
        </tr>
        <tr>
          <td class="field-name">Picos</td>
          <td>Momentos de pot√™ncia m√°xima</td>
          <td>Verificar se atingiu limites, correlacionar com eventos.</td>
        </tr>
      </table>

      <h4>Gr√°fico: Temperatura ao Longo do Tempo</h4>
      <table class="field-table">
        <tr><th>Elemento</th><th>O que mostra</th><th>Por que √© importante</th></tr>
        <tr>
          <td class="field-name">Linha M√°xima</td>
          <td>Temperatura da c√©lula mais quente</td>
          <td>Principal indicador de seguran√ßa t√©rmica.</td>
        </tr>
        <tr>
          <td class="field-name">Linha M√≠nima</td>
          <td>Temperatura da c√©lula mais fria</td>
          <td>Evitar opera√ß√£o abaixo de 0¬∞C.</td>
        </tr>
        <tr>
          <td class="field-name">Linha M√©dia</td>
          <td>Temperatura m√©dia do sistema</td>
          <td>Tend√™ncia geral.</td>
        </tr>
        <tr>
          <td class="field-name">Faixa Sombreada</td>
          <td>Spread entre min e max</td>
          <td>Spread crescente indica problema de refrigera√ß√£o.</td>
        </tr>
        <tr>
          <td class="field-name">Linhas de Threshold</td>
          <td>Limites de alerta e cr√≠tico</td>
          <td>Visualizar quando o sistema entrou em zona de risco.</td>
        </tr>
      </table>

      <h4>Controles do Hist√≥rico</h4>
      <table class="field-table">
        <tr><th>Controle</th><th>Op√ß√µes</th><th>Uso</th></tr>
        <tr>
          <td class="field-name">Per√≠odo</td>
          <td>1h, 6h, 24h, 7d, 30d, Personalizado</td>
          <td>Diferentes horizontes de an√°lise.</td>
        </tr>
        <tr>
          <td class="field-name">Resolu√ß√£o</td>
          <td>1min, 5min, 15min, 1h, 1d</td>
          <td>Maior resolu√ß√£o = mais detalhe, mais dados.</td>
        </tr>
        <tr>
          <td class="field-name">M√©tricas</td>
          <td>Checkboxes para cada m√©trica</td>
          <td>Escolher o que visualizar no gr√°fico.</td>
        </tr>
        <tr>
          <td class="field-name">Exportar</td>
          <td>CSV, Excel, PNG</td>
          <td>Baixar dados para an√°lise externa ou relat√≥rios.</td>
        </tr>
        <tr>
          <td class="field-name">Comparar</td>
          <td>Sobrepor per√≠odo anterior</td>
          <td>Comparar comportamento atual vs hist√≥rico.</td>
        </tr>
      </table>
    </div>
  </div>

  <!-- ABA: ALERTAS -->
  <div class="tab-section">
    <div class="tab-header">üö® Aba: Alertas</div>
    <div class="tab-content">
      <p>Hist√≥rico de alertas e eventos deste sistema espec√≠fico:</p>

      <h4>Lista de Alertas</h4>
      <table class="field-table">
        <tr><th>Coluna</th><th>O que mostra</th><th>Por que √© importante</th></tr>
        <tr>
          <td class="field-name">Timestamp</td>
          <td>Data/hora do alerta</td>
          <td>Quando o evento ocorreu.</td>
        </tr>
        <tr>
          <td class="field-name">Severidade</td>
          <td>Cr√≠tico / Alto / M√©dio / Baixo</td>
          <td>Prioriza√ß√£o de aten√ß√£o.</td>
        </tr>
        <tr>
          <td class="field-name">Tipo</td>
          <td>Categoria do alerta</td>
          <td>Agrupamento por tipo de problema.</td>
        </tr>
        <tr>
          <td class="field-name">Descri√ß√£o</td>
          <td>Texto descritivo do alerta</td>
          <td>Detalhes do que aconteceu.</td>
        </tr>
        <tr>
          <td class="field-name">Valores</td>
          <td>Valores que dispararam o alerta</td>
          <td>Contexto num√©rico do evento.</td>
        </tr>
        <tr>
          <td class="field-name">Status</td>
          <td>Ativo / Reconhecido / Resolvido</td>
          <td>Estado atual do alerta.</td>
        </tr>
        <tr>
          <td class="field-name">Dura√ß√£o</td>
          <td>Quanto tempo o alerta durou</td>
          <td>Alertas longos s√£o mais preocupantes.</td>
        </tr>
        <tr>
          <td class="field-name">A√ß√µes</td>
          <td>Bot√µes de a√ß√£o</td>
          <td>Reconhecer, investigar, resolver.</td>
        </tr>
      </table>

      <h4>Tipos Comuns de Alertas BESS</h4>
      <table class="field-table">
        <tr><th>Tipo</th><th>Causa Comum</th><th>A√ß√£o Recomendada</th></tr>
        <tr>
          <td class="field-name">Temperatura Alta</td>
          <td>Refrigera√ß√£o insuficiente, corrente alta, c√©lula defeituosa</td>
          <td>Reduzir pot√™ncia, verificar refrigera√ß√£o, inspecionar c√©lulas.</td>
        </tr>
        <tr>
          <td class="field-name">Tens√£o C√©lula Baixa</td>
          <td>C√©lula degradada, desbalanceamento extremo</td>
          <td>Parar opera√ß√£o, balancear, poss√≠vel substitui√ß√£o de c√©lula.</td>
        </tr>
        <tr>
          <td class="field-name">Tens√£o C√©lula Alta</td>
          <td>Sobrecarga, falha no BMS, c√©lula com capacidade reduzida</td>
          <td>Parar carga, verificar configura√ß√£o BMS.</td>
        </tr>
        <tr>
          <td class="field-name">Corrente Excessiva</td>
          <td>Demanda al√©m do especificado</td>
          <td>Limitar pot√™ncia, verificar aplica√ß√£o.</td>
        </tr>
        <tr>
          <td class="field-name">Comunica√ß√£o Perdida</td>
          <td>Problema de rede, falha no gateway</td>
          <td>Verificar conectividade, reiniciar equipamentos de comunica√ß√£o.</td>
        </tr>
        <tr>
          <td class="field-name">SOC Cr√≠tico</td>
          <td>Descarga excessiva sem recarga</td>
          <td>Iniciar carga ou verificar por que n√£o est√° carregando.</td>
        </tr>
        <tr>
          <td class="field-name">Desbalanceamento</td>
          <td>C√©lulas com capacidades diferentes</td>
          <td>Executar ciclo de balanceamento, monitorar c√©lulas problem√°ticas.</td>
        </tr>
        <tr>
          <td class="field-name">Isolamento</td>
          <td>Perda de isolamento el√©trico</td>
          <td>PARAR imediatamente, inspe√ß√£o t√©cnica obrigat√≥ria.</td>
        </tr>
      </table>
    </div>
  </div>
</div>

<!-- ========== 6. PAINEL DE CONTROLE ========== -->
<div class="menu-section" id="painel-controle">
  <div class="menu-header">
    <h2>üéÆ Painel de Controle</h2>
    <span class="path">/systems/:systemId/control</span>
    <p>Interface para opera√ß√£o manual do sistema BESS, com comandos de carga/descarga, configura√ß√£o de modos e monitoramento em tempo real.</p>
  </div>

  <h3>Vis√£o Geral</h3>
  <p>
    O Painel de Controle √© onde voc√™ efetivamente OPERA o sistema BESS. Daqui voc√™ pode iniciar cargas,
    descargas, alterar modos de opera√ß√£o e responder a eventos. √â a interface de "cockpit" do operador.
  </p>

  <div class="warning">
    <h5>‚ö†Ô∏è ATEN√á√ÉO: √Årea de Opera√ß√£o Cr√≠tica</h5>
    <p>
      Comandos executados neste painel afetam diretamente o equipamento f√≠sico. Opera√ß√µes incorretas podem
      causar danos ao sistema, perda de garantia ou at√© riscos de seguran√ßa. Certifique-se de ter autoriza√ß√£o
      e treinamento adequado antes de operar.
    </p>
  </div>

  <div class="importance">
    <h5>üéØ Por que este menu √© importante para BESS?</h5>
    <p>
      A capacidade de controlar remotamente um sistema BESS √© o que diferencia um sistema "monitorado" de um
      sistema "gerenciado". Com controle remoto, voc√™ pode responder a oportunidades de mercado (iniciar descarga
      quando pre√ßo est√° alto), reagir a emerg√™ncias (parar sistema com temperatura elevada) e otimizar opera√ß√£o
      sem precisar enviar t√©cnico ao local.
    </p>
  </div>

  <h3>Se√ß√£o: Status em Tempo Real</h3>
  <p>Painel superior mostra o estado atual do sistema:</p>

  <div class="card-detail">
    <h4>Indicadores de Status</h4>
    <table class="field-table">
      <tr><th>Indicador</th><th>O que mostra</th><th>Atualiza√ß√£o</th><th>Por que √© importante</th></tr>
      <tr>
        <td class="field-name">Estado Atual</td>
        <td>CHARGING / DISCHARGING / STANDBY / ERROR</td>
        <td>Tempo real</td>
        <td>Confirmar que comando foi executado.</td>
      </tr>
      <tr>
        <td class="field-name">SOC</td>
        <td>Percentual com barra visual grande</td>
        <td>A cada 2s</td>
        <td>Decis√£o de quando parar carga/descarga.</td>
      </tr>
      <tr>
        <td class="field-name">Pot√™ncia</td>
        <td>kW com indicador visual de dire√ß√£o</td>
        <td>Tempo real</td>
        <td>Confirmar pot√™ncia sendo executada.</td>
      </tr>
      <tr>
        <td class="field-name">Temperatura</td>
        <td>¬∞C com indicador de cor</td>
        <td>A cada 5s</td>
        <td>Monitorar seguran√ßa t√©rmica durante opera√ß√£o.</td>
      </tr>
      <tr>
        <td class="field-name">Tens√£o DC</td>
        <td>Volts do barramento</td>
        <td>Tempo real</td>
        <td>Verificar se tens√£o est√° na faixa esperada.</td>
      </tr>
      <tr>
        <td class="field-name">Corrente DC</td>
        <td>Amperes</td>
        <td>Tempo real</td>
        <td>Verificar se corrente est√° dentro do limite.</td>
      </tr>
    </table>
  </div>

  <h3>Se√ß√£o: Comandos de Opera√ß√£o</h3>

  <div class="card-detail control">
    <h4>Comando: Iniciar Carga</h4>
    <table class="field-table">
      <tr><th>Campo</th><th>Descri√ß√£o</th><th>Faixa</th><th>Dica</th></tr>
      <tr>
        <td class="field-name">Pot√™ncia de Carga</td>
        <td>kW desejado para carregamento</td>
        <td>0 at√© pot√™ncia nominal</td>
        <td>Comece com 50% do nominal se n√£o tiver certeza.</td>
      </tr>
      <tr>
        <td class="field-name">SOC Alvo</td>
        <td>Parar carga quando atingir este SOC</td>
        <td>SOC atual at√© 100%</td>
        <td>Evite 100% para preservar vida √∫til. 80-90% √© ideal.</td>
      </tr>
      <tr>
        <td class="field-name">Dura√ß√£o M√°xima</td>
        <td>Tempo limite para a opera√ß√£o</td>
        <td>Opcional</td>
        <td>√ötil para agendar fim da carga.</td>
      </tr>
    </table>

    <div class="command-box">
      <span class="cmd">CHARGE</span> <span class="param">power=</span><span class="value">100kW</span> <span class="param">target_soc=</span><span class="value">85%</span> <span class="param">max_duration=</span><span class="value">2h</span>
    </div>

    <p><strong>Quando usar:</strong> Quando energia est√° barata (madrugada, hor√°rio fora de ponta), quando h√° excesso de gera√ß√£o solar/e√≥lica, quando precisa preparar para evento de descarga.</p>
  </div>

  <div class="card-detail control">
    <h4>Comando: Iniciar Descarga</h4>
    <table class="field-table">
      <tr><th>Campo</th><th>Descri√ß√£o</th><th>Faixa</th><th>Dica</th></tr>
      <tr>
        <td class="field-name">Pot√™ncia de Descarga</td>
        <td>kW desejado para descarga</td>
        <td>0 at√© pot√™ncia nominal</td>
        <td>Considere demanda da carga conectada.</td>
      </tr>
      <tr>
        <td class="field-name">SOC M√≠nimo</td>
        <td>Parar descarga quando atingir este SOC</td>
        <td>10% at√© SOC atual</td>
        <td>Evite abaixo de 20% para preservar vida √∫til.</td>
      </tr>
      <tr>
        <td class="field-name">Dura√ß√£o M√°xima</td>
        <td>Tempo limite para a opera√ß√£o</td>
        <td>Opcional</td>
        <td>√ötil para eventos de peak shaving programados.</td>
      </tr>
    </table>

    <div class="command-box">
      <span class="cmd">DISCHARGE</span> <span class="param">power=</span><span class="value">150kW</span> <span class="param">min_soc=</span><span class="value">20%</span> <span class="param">max_duration=</span><span class="value">4h</span>
    </div>

    <p><strong>Quando usar:</strong> Durante hor√°rio de ponta (energia cara), para peak shaving quando demanda est√° alta, em resposta a sinal de demand response, para venda de energia no mercado.</p>
  </div>

  <div class="card-detail control">
    <h4>Comando: Parar / Standby</h4>
    <p>Interrompe qualquer opera√ß√£o em andamento e coloca o sistema em modo de espera.</p>

    <div class="command-box">
      <span class="cmd">STOP</span>
    </div>

    <p><strong>Quando usar:</strong> Quando detectar anomalia, quando precisar de pausa para manuten√ß√£o, quando a estrat√©gia de opera√ß√£o mudou.</p>
  </div>

  <div class="card-detail control" style="background: #fef2f2; border-color: #fecaca;">
    <h4 style="color: #dc2626;">Comando: Parada de Emerg√™ncia</h4>
    <p>Desliga o sistema imediatamente, abrindo contactores e interrompendo toda opera√ß√£o.</p>

    <div class="command-box" style="background: #7f1d1d;">
      <span style="color: #fca5a5;">EMERGENCY_STOP</span>
    </div>

    <div class="warning">
      <h5>‚ö†Ô∏è USE APENAS EM EMERG√äNCIAS REAIS</h5>
      <p>
        Este comando desliga o sistema abruptamente. Use apenas quando:
        <br>‚Ä¢ Detectar fuma√ßa ou cheiro de queimado
        <br>‚Ä¢ Temperatura subindo rapidamente (>1¬∞C/min)
        <br>‚Ä¢ Alarme de isolamento
        <br>‚Ä¢ Qualquer situa√ß√£o que represente risco iminente
      </p>
    </div>
  </div>

  <h3>Se√ß√£o: Modos de Opera√ß√£o</h3>

  <div class="card-detail config">
    <h4>Seletor de Modo</h4>
    <table class="field-table">
      <tr><th>Modo</th><th>Descri√ß√£o</th><th>Quando usar</th></tr>
      <tr>
        <td class="field-name">Manual</td>
        <td>Operador controla diretamente via comandos</td>
        <td>Testes, situa√ß√µes espec√≠ficas, troubleshooting.</td>
      </tr>
      <tr>
        <td class="field-name">Autom√°tico</td>
        <td>Sistema segue regras pr√©-configuradas</td>
        <td>Opera√ß√£o normal do dia-a-dia.</td>
      </tr>
      <tr>
        <td class="field-name">Peak Shaving</td>
        <td>Descarrega automaticamente quando demanda ultrapassa limite</td>
        <td>Reduzir conta de demanda contratada.</td>
      </tr>
      <tr>
        <td class="field-name">Arbitragem</td>
        <td>Carrega quando energia barata, descarrega quando cara</td>
        <td>Maximizar ganho financeiro com diferen√ßa de tarifa.</td>
      </tr>
      <tr>
        <td class="field-name">Backup</td>
        <td>Mant√©m SOC alto para emerg√™ncias</td>
        <td>Quando confiabilidade √© prioridade sobre economia.</td>
      </tr>
      <tr>
        <td class="field-name">Grid Services</td>
        <td>Responde a sinais do operador da rede</td>
        <td>Participa√ß√£o em mercados de servi√ßos ancilares.</td>
      </tr>
      <tr>
        <td class="field-name">Self-Consumption</td>
        <td>Maximiza uso de gera√ß√£o local (solar)</td>
        <td>Sistemas com gera√ß√£o fotovoltaica associada.</td>
      </tr>
    </table>
  </div>

  <h3>Se√ß√£o: Agendamento</h3>

  <div class="card-detail">
    <h4>Agenda de Opera√ß√µes</h4>
    <p>Programe opera√ß√µes para executar automaticamente:</p>
    <table class="field-table">
      <tr><th>Campo</th><th>Descri√ß√£o</th><th>Exemplo</th></tr>
      <tr>
        <td class="field-name">Hora In√≠cio</td>
        <td>Quando a opera√ß√£o deve come√ßar</td>
        <td>23:00 (in√≠cio da carga noturna)</td>
      </tr>
      <tr>
        <td class="field-name">Hora Fim</td>
        <td>Quando a opera√ß√£o deve terminar</td>
        <td>06:00 (fim da carga noturna)</td>
      </tr>
      <tr>
        <td class="field-name">Opera√ß√£o</td>
        <td>Carga, Descarga ou Standby</td>
        <td>Carga a 80kW</td>
      </tr>
      <tr>
        <td class="field-name">Dias da Semana</td>
        <td>Em quais dias executar</td>
        <td>Segunda a Sexta</td>
      </tr>
      <tr>
        <td class="field-name">Repetir</td>
        <td>Se deve repetir automaticamente</td>
        <td>Sim, toda semana</td>
      </tr>
    </table>

    <div class="info">
      <h5>üí° Dica de Agendamento</h5>
      <p>
        Configure a carga para hor√°rio fora de ponta (tipicamente 23h-06h) e descarga para hor√°rio de ponta
        (18h-21h). Isso maximiza economia com diferen√ßa de tarifa mesmo sem interven√ß√£o manual.
      </p>
    </div>
  </div>

  <h3>Se√ß√£o: Limites e Prote√ß√µes</h3>

  <div class="card-detail config">
    <h4>Configura√ß√£o de Limites Operacionais</h4>
    <table class="field-table">
      <tr><th>Par√¢metro</th><th>Descri√ß√£o</th><th>Padr√£o</th><th>Por que √© importante</th></tr>
      <tr>
        <td class="field-name">SOC M√≠nimo</td>
        <td>Sistema para descarga ao atingir</td>
        <td>10-20%</td>
        <td>Protege c√©lulas contra descarga profunda.</td>
      </tr>
      <tr>
        <td class="field-name">SOC M√°ximo</td>
        <td>Sistema para carga ao atingir</td>
        <td>90-100%</td>
        <td>Protege c√©lulas contra sobrecarga.</td>
      </tr>
      <tr>
        <td class="field-name">Temperatura M√°xima</td>
        <td>Reduz pot√™ncia ou para ao atingir</td>
        <td>45-50¬∞C</td>
        <td>Previne thermal runaway.</td>
      </tr>
      <tr>
        <td class="field-name">Temperatura M√≠nima</td>
        <td>N√£o carrega abaixo desta temperatura</td>
        <td>0-5¬∞C</td>
        <td>Previne lithium plating (dano irrevers√≠vel).</td>
      </tr>
      <tr>
        <td class="field-name">Pot√™ncia M√°xima</td>
        <td>Limite de pot√™ncia mesmo se solicitado mais</td>
        <td>100% do nominal</td>
        <td>Protege sistema contra sobrecarga.</td>
      </tr>
      <tr>
        <td class="field-name">Corrente M√°xima</td>
        <td>Limite de corrente</td>
        <td>Especifica√ß√£o do fabricante</td>
        <td>Protege c√©lulas e conex√µes.</td>
      </tr>
    </table>
  </div>

  <h3>Log de Opera√ß√µes</h3>

  <p>Todas as opera√ß√µes s√£o registradas com:</p>
  <ul>
    <li><strong>Timestamp:</strong> Data/hora exata do comando</li>
    <li><strong>Usu√°rio:</strong> Quem executou o comando</li>
    <li><strong>Comando:</strong> O que foi solicitado</li>
    <li><strong>Resultado:</strong> Sucesso ou erro</li>
    <li><strong>Par√¢metros:</strong> Valores utilizados</li>
  </ul>

  <div class="info">
    <h5>üí° Rastreabilidade</h5>
    <p>
      O log de opera√ß√µes √© fundamental para auditoria e troubleshooting. Se algo der errado, voc√™ pode
      verificar exatamente o que foi feito e quando. Tamb√©m √© √∫til para an√°lise de performance e
      identifica√ß√£o de padr√µes operacionais.
    </p>
  </div>
</div>

</div>

<footer>
  <p><strong>Lifo4 EMS</strong> - Manual Completo</p>
  <p>Parte II: Detalhes do Sistema e Painel de Controle</p>
  <p>Continue na Parte III para C√¢meras e Microgrids</p>
</footer>

</body>
</html>
